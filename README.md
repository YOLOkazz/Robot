# РОБОТ НА КЛЕТЧАТОМ ПОЛЕ СО СТОРОНАМИ ГОРИЗОНТА

Данное ПО предназначено для поддержки начального курса программирования для студентов-первокурсников, целью которого является научить писать хорошо структурированный программный код, основываясь на технологии проектирования сверху вниз и включая использование идей обобщенного программирования. Оно помогает легко формулировать учебные задачи, сложность которых можно варьировать в достаточно широких пределах, и на которых можно научить (научиться) всему заявленному, по крайней мере, в некотором приближении.

Лежащие в основе методические идеи восходят к учебнику Кушниренко А.Г. и Лебедева Г.В. "Программирование для математиков", 1988.

Важно также, что для достижения поставленной цели язык программирования Julia, с его ясным и удобным синтаксисом, развитой системой типов, поддержкой основных на сегодняшний день парадигм программирования, а также с его интерактивными возможностями, является весьма и весьма подходящим. 

О рекомендуемых источниках информации о новом, еще только набирающем популярность, но очень интересном и перспективном, по нашему мнению, языке программирования Julia см. ниже. 

## Содержание файла robot.jl

Файл robot.jl содержит определение модуля HorizonSideRobot, включающего в себя определения следующих экспортируемых типов данных.

 1. @enum HorizonSide Nord=0 West=1 Sud=2 Ost=3
   
   Это перечисление, определяющее обозначения сторон горизонта (Cевер, Запад, Юг, Восток, соответственно). Фактически HorizonSide - это тип данных с возможными значениями: Nord, West, Sud, Ost (при этом HorizonSide(0) - означает Nord, HorizonSide(1) - означает West и т.д.)    

 2. Тип Robot с экспортируемыми функциями: 

    - Robot(...)
    - move!(::Robot,::HorizonSide)::Nothing
    - isborder(::Robot,::HorizonSide)::Bool
    - putmarker!(::Robot)::Nothing
    - ismarker(::Robot)::Bool
    - temperature(::Robot)::Int
    - show(::Robor)::Nothing
    - show!(::Robor)::Nothing
    - save(::Robot, ::AbstractString)
  
     Этот пользовательский тип предназначен для создания (с помощью конструктора Robot) объектов - "роботов на клетчатом поле со сторонами горизонта". Каждый такой объект позволяет имитировать программное управление роботом, движущимся по клетчатому полю с заданной обстановкой и выполняющим на нем те или иные действия.    

В дальнейшем, уже для работы с "роботом", импортировать модуль HorizonSideRobot не придется, т.к. соответствующий оператор импортирования уже содержится в конце файла robot.jl (достаточно будет простого включения содержимого файла с помощью include, см. ниже).

Обстановка на поле определяется наличием или отсутствием ограничивающей поле прямоугольной рамки (поле может быть ограниченным или неограниченным), наличием или отсутствием внутренних (межклеточных) перегородок, наличием или отсутствием маркеров в клетках поля, положением робота на поле. Робот не может убирать имеющиеся перегородки или устанавливать новые, но может проверять их наличие, он может делать шаг ровно на 1 клетку в кажом из 4-х направлений горизонта (наличие на пути перегородки приведет к фатальной ошибке), может устанавливать маркер в клетке поля, в которой робот находится в данный момент, проверять наличие маркера в этой клетке, но убрать ранее поставленный маркер он не может. Также робот умеет измерять температуру в той клетке поля, в которой находится.

## Подготовка к работе с модулем

1. Работа модуля HorizonSideRobot требует, чтобы кроме Julia на комьютере был установлен интерпретатор Python 3 c библиотекой matplotlib. Для этого проще всего воспользоваться дистрибутивом Anaconda, и тогда все это будет гарантированно установлено (инструкцию по установке см., например, здесь https://pythonru.com/baza-znanij/kak-ustanovit-anaconda-na-windows). Саму Julia желательно установить уже после установки Anaconda (тогда все необходимые действия по интеграции установщик Julia выполнит автоматически). Скачать ее надо с сайта разработчиков https://julialang.org/downloads (если потребуется, то инструкцию по установке см., например, здесь https://techytok.com/julia-vscode/ - при необходимости можно воспользоваться goole-переводчиком).

2. Желательно также установить популярный редактор программного кода VS Code с расширением Julia (по-видимому, на сегодняшний день это наиболее удобный вариант для программирования на языке Julia, по крайней мере для начинающих). Также надо будет позаботиться, чтобы путь к папке с julia.exe был известен VS Code (инструкцию о том, как этого добиться, можно найти, например, здесь https://techytok.com/julia-vscode/ - при необходимости можно воспользоваться goole-переводчиком).

После установки VS Code с расширением для Julia, для запуска REPL (интерактивного окна) Julia потребуется из терминала, имеющегося в VS, выполнить команду: 

    cmd> julia

3. После этого, уже из REPL Julia, необходимо будет скачать с GitHab пакет PyPlot.jl.   

Делается это с помощью встроенного пакетного менеджера очень просто. Сначала надо из стандартного режима REPL перейти в режим пакетного менеджера, набрав 

    julia>]

После чего выполнить скачивание: 

    pkg> add PyPlot.jl+Enter

Процесс скачивания займет некоторое время. 
После его завершения следует вернуться в стандартный режим REPL нажатием клавиши Backspace ("забой"). 

4. Наконец, требуется скачать файл "robot.jl" из репозитория GitHub.

Для этого необходимо, используя веб-браузер, зайти по адресу https://github.com/Vibof/Robot в соответствующий репозиторий GitHub (читающий этот текст, скорее всего, это уже сделал) и скачать его содержимое на свой компьютер.  Для этого можно на странице репозитория кликнуть мышью по кнопке Code (она находится над перечнем файлов справа и выделена зеленым цветом) и в открывшемся списке выбрать "Download Zip". 
   
Затем полученный таким образом файл robot.jl (после разархивирования всего содержимого репозитория) надо поместить в заранее созданную на компьютере специальную рабочую папку, которую требуется сделать текущей (просто открыв ее в VS Code), и в которой впоследствии следует сохранять все свои файлы и папки с программным кодом и другие файлы (например, файлы с обстановкой на поле). 

## Использование файла robot.jl
    
Фактически этот файл содержит определение перечисления HorizonSide (определяющего имена сторон горизонта) и определение пользовательского типа Robot и связанных с ним функций.

Для начала работы с "роботом" требуется только выполнить включение содержимого файла "robot.jl" в область REPL (интерактивное коммандное окно Julia) VS Code

    julia> include("robot.jl")

(делать это включение будет необходимо повторно в начале каждого нового сеанса работы с Julia).

После этого включения имена HorizonSide, Nord, West, Sud, Ost, Robot, move!, isborder, putmarker!, ismarker, temperature, show, save, а так же - sitedit, sitcreate окажутся доступными в соответствующем пространстве имен. 
В результате, в частности, станет возможным получить более детальную информацию о каждом из них с помощью встроенной системы помощи (help). 

Чтобы из стандартного режима REPL перейти в режим help, требуется набрать 

    julia>?

После этого можно будет, например, набрать 

    help?> Robot+Enter

и получить интересующую информацию. 

Стоит иметь в виду, что, поскольку функция include фактически осуществляет вставку (как бы) соответствующего программного кода из указанного файла в текущую позицию, то после выполнения include("robot.jl") более одного раза в последующем может возникнуть не нужная проблема (связанная с дублированием некоторых определений).

## Создание объекта типа Robot с той или иной начальной обстановкой на поле

Предусмотрены следующие варианты вызова конструктора Robot.

   1. r=Robot()

   2. r=Robot(<число_строк_клеток_поля>,<число_столбцов_клеток_поля>)

   3. r=Robot(<имя_файла_с_oбстановкой>)

   4. r=Robot(...; animate=true)

В первом случае создается ограниченное рамкой поле 11x12 без внутренних перегородок и маркеров в клетках, с положением робота в юго-восточном (нижнем левом) углу.

Во втором - поле будет иметь указанные размеры.

В третьем - обстановка на поле будет соответствовать данным, загруженным из соответствующего файла; рекомендуется для таких файлов использовать расширение .sit (от слова situation).

Во всех 3-х случаях создается объект r типа Robot (точнее говоря, r - это ссылка на объект), внутри себя содержащий структуру данных с соответствующей обстановкой. При выполнении команд робота эта внутренняя структура данных может изменяться, но визуализации обстановки на поле при этом еще не будет.

При желании посмотреть текущую обстановку следует воспользоваться функцией show(r).

В результате ее выполнения будет открыто графическое окно с текущей обстановкой.

При необходимости при просмотре редактировать текущую обстановку с помощью мыши, вместо функции show следует использовать функциию show!.

При желании сохранить текущую обстановку в файле следует воспользоваться функцией 
save(r, <имя_файла>).

Кроме этого, еще имеется возможность запустить робота с анимацией выполняемых им действий, указав значение true ключевого слово animate:  

    julia> r=Robot(...; animate=true)

где вместо многоточия должны быть указаны фактические параметры (или они могут отсутствовать) в соответствии с первыми 3-мя вариантами использования конструктора. 

При этом функции show, show! использовать будет уже нельзя (это привело бы к ошибке времени выполнения). Но все функции графического окна, открывавшегося прежде при вызове функции show или show!, будут присущи аналогичному графическому окну, открывающемуся теперь автоматически при вызове конструктора. 

С помощью этого окна можно отслеживать все действия "робота" в режиме анимации. Однако этот режим приводит к дополнительным временным задержкам, не желательным, может быть, при выполненнии "роботом" объемных действий.

## Командный интерфейс "робота"

Следующие функции составляют командный интерфейс "робота", с помощью которго (и только с помощью которого) с ним можно взаимодействовать.

    - move!(::Robot,::HorizonSide)::Nothing - перемещает робота ровно на 1 клетку в указанном направлении
    - isborder(::Robot,::HorizonSide)::Bool - проверяет наличие перегородки в указанном направлении
    - putmarker!(::Robot)::Nothing - ставит маркер в клетке с роботом
    - ismarker(::Robot)::Bool - проверяет наличие маркера в клетке с роботом 
    - temperature(::Robot)::Int - возвращает температуру клетки с роботом
    - show(::Robor)::Nothing - открывает окно с обстановкой на поле (без возможности редактирования)
    - show!(::Robor)::Nothing - открывает окно с обстановкой на поле и предоставляет возможность редактирования обстановки
    - save(::Robot, ::AbstractString) - сохраняет текущую обстановку в указанном файле
(здесь всюду на позициях параметров каждой из функций указаны только типы парметров)

По любой из них можно получить исчерпывающую информацию, используя встроенную систему помощи (но только после того как будет выполено include("robot.jl"), и перейдя для этого из стандартного режима REPL, в режим помощи). 

Например:
    julia>?
    help?> move!+Enter
        move!(r::Robot, side::HorizonSide)::Nothing
    -- Перемещает робота в соседнюю клетку в заданном направлении (если только на пути нет перегoродки, в противном случае - прерывание)

После созданния объекта типа Robot (и записи ссылки на него в некоторую переменную) любую команду "робота" можно исполнить непосредственно из REPL. Для наибольшей наглядности можно воспользоваться возможнотью запуска "робота" в интеракивном режиме. Например:

    julia> r=Robot(animate=true); 

    julia> move!(r,Nord)

    julia> isborder(r,Ost)
        true
    julia> ismarker(r)
        false
    julia> putmarker(r)

    julia> ismarker(r)
        true
    julia> temperature(r)
        тут будет напечатано целое число

    Точка с запятой после вызова конструктра Robot поставлена, чтобы предотвратить вывод на экран не нужной нам информации о внутренней структуре созданного объекта.