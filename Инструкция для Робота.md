# ИНСТРУКЦИЯ ПО ИСПОЛЬЗОВАНИЮ РОБОТА

Для начала работы с Роботом требуется только включить содержимого файла `robot.jl` в область REPL (интерактивное коммандное окно Julia):

    julia> include("robot.jl")

Выполнятью эту команду необходимо в каждом новом сеансе работы с Julia.

После этого включения имена `HorizonSide`, `Nord`, `West`, `Sud`, `Ost`, `Robot`, `move!`, `isborder`, `putmarker!`, `ismarker`, `temperature`, `show`, `save`, а также `sitedit` и `sitcreate` окажутся доступными в соответствующем пространстве имён. В результате, в частности, станет возможным получить более детальную информацию о каждом из них с помощью встроенной системы помощи (`help`). Чтобы из стандартного режима REPL перейти в режим help, требуется ввести:

    julia> ?+Enter

После этого можно будет, например, набрать

    help?> Robot+Enter

и получить интересующую информацию. Возврат в стандартный режим REPL осуществляется с помощью клавиши Backspace.

Стоит иметь в виду, что, поскольку функция `include` (как бы) осуществляет вставку соответствующего программного кода из указанного файла в текущую позицию, то после выполнения `include("robot.jl")` более одного раза во время сеанса могут возникнуть проблемы, связанные с дублированием некоторых определений.

## Создание Робота с заданной обстановкой на поле

Предусмотрены следующие варианты вызова конструктора Robot.

1. `r=Robot()`
2. `r=Robot(<число_строк_клеток_поля>,<число_столбцов_клеток_поля>)`
3. `r=Robot(<имя_файла_с_oбстановкой>)`
4. `r=Robot(...; animate=true)`

В первом случае создается ограниченное рамкой поле 11x12 без внутренних перегородок и маркеров в клетках, с положением робота в юго-восточном (нижнем левом) углу.

Во втором — поле будет иметь указанные размеры.

В третьем — обстановка на поле будет соответствовать данным, загруженным из соответствующего файла; рекомендуется для таких файлов использовать расширение `.sit` (от слова situation).

Во всех 3-х случаях создается объект `r` типа `Robot` (точнее говоря, `r` — это ссылка на объект), внутри себя содержащий структуру данных с соответствующей обстановкой. При выполнении команд Робота эта внутренняя структура данных может изменяться, но визуализации обстановки на поле при этом ещё не будет.

При желании посмотреть текущую обстановку следует воспользоваться функцией `show(r)`. В результате её выполнения будет открыто графическое окно с текущей обстановкой. При необходимости во время просмотра редактировать текущую обстановку с помощью мыши, вместо функции `show` следует использовать функциию `show!`.

При желании сохранить текущую обстановку в файле следует воспользоваться функцией 
`save(r, <имя_файла>)`.

Кроме этого имеется возможность запустить Робота с анимацией выполняемых им действий, указав значение `true` для параметра `animate`:  

    julia> r=Robot(...; animate=true)

где вместо многоточия должны быть указаны фактические параметры (или они могут отсутствовать) в соответствии с первыми тремя вариантами использования конструктора. 

При этом функции `show`, `show!` использовать будет уже нельзя (это привело бы к ошибке времени выполнения). Но все функции графического окна, открывавшегося прежде при вызове функции `show` или `show!`, будут присущи аналогичному графическому окну, открывающемуся теперь автоматически при вызове конструктора. 

С помощью этого окна можно отслеживать все действия Робота в режиме анимации. Однако этот режим приводит к дополнительным временным задержкам, обычно нежелательным при выполненнии Роботом объёмных действий.

## Командный интерфейс Робота

Следующие функции составляют командный интерфейс "робота", с помощью которго (и только с помощью которого) с ним можно взаимодействовать.

- `move!(::Robot,::HorizonSide)::Nothing`
- `isborder(::Robot,::HorizonSide)::Bool`
- `putmarker!(::Robot)::Nothing`
- `ismarker(::Robot)::Bool`
- `temperature(::Robot)::Int`
- `show(::Robor)::Nothing`
- `show!(::Robor)::Nothing`
- `save(::Robot, ::AbstractString)`

По любой из них можно получить справку, используя встроенную систему помощи (но только после того как будет выполено `include("robot.jl")`, и перейдя для этого из стандартного режима REPL в режим помощи, см. выше). Например,

    help?> move!
        move!(r::Robot, side::HorizonSide)::Nothing
    -- Перемещает робота в соседнюю клетку в заданном направлении (если только на пути нет перегoродки, в противном случае - прерывание)

или

    help?> isborder
        isborder(r::Robot, side::HorizonSide)::Bool
    -- Проверяет наличие перегородки в заданном направлении

или

    help?> putmarker!
        putmarker!(r::Robot)::Nothing
    -- Ставит маркер в клетке с роботом
или

    help?> ismarker
        ismarker(r::Robot)::Bool
    -- Проверяет наличие маркера в клетке с роботом

или

    help?> temperature
        temperature(r::Robot)::Int
    -- Возвращает значение "температуры" клетки с роботом (на самом деле, всюду за пределами видимой части поля температура равна 0)

или

    help?> show
        show(r::Robot)::Nothing
    -- Открывает окно с текущей обстановкой на поле с роботом, при этом невозможно редактирование обстановки с помощью мыши 
    (устанавливать/снимать перегородки и/или маркеры, перемещать робота). Если же необходимо иметь возможность 
    редактировать показанную обстановку, то вместо show(::Robot) следует использовать функцию show!(::Robot)

или

        show(sitfile::AbstractString)::Nothing
    -- Открывает окно с текущей обстановкой на поле с роботом, загруженной непосредственно из файла. 
    Редактирование обстановки невозможно (для редактирования sit-файлов имеется специальная функция sitedit).

или
    help?> show!
        show!(r::Robot)::Nothing
    -- Открывает окно с текущей обстановкой на поле с роботом, и предоставляет возможность редактирования обстановки с помощью мыши (устанавливать/снимать перегородки и/или маркеры, перемещать робота).

или

    help?> save
        save(r::Robot, sitfile::AbstractString)::Nothing
    -- сохраняет обстановку на поле с роботом в указанном текстовом файле  

## О возможных интерпретациях заданий на программирование Робота

Во-первых, можно представлять себе, что Робот — это реальное физическое устройство (автомат), по какому-либо каналу связи соединенному с компьютером, и допускающее программное управление посредством предоставляемого им программного (командного) интерфейса. В этом случае надо считать, что конструктор `Robot` создает в памяти компьютера некоторый объект, обеспечивающий указанный интерфейс (и возвращает на него ссылку). И тогда главная функция, которую требуется написать, согласно тому или иному заданию, должна будет получать указатель на этот объект через соответствующий входной параметр. 

Во-вторых, можно считать, что главная функция (программа) на вход получает не ссылку на объект типа `Robot`, а считывает файл, содержащий информацию об обстановке на клетчатом поле (включающую расположение перегородок, маркеров, самого робота и массив температур клеток поля). А результатом работы программы должна быть некоторая информация, извлеченная из исходного файла с обстановкой и записываемая в некотором формате в выходной файл, или выходной файл с новой обстановкой. В этом случае Робот, которого тогда надо еще создавать в этой программе, будет выступать просто как виртуальный исполнитель, умеющий извлекать информацию из файла с обстановкой, и записывать в другой файл в нужном формате итоговую информацию. Для этого, если речь идет о выходном файле, содержащем итоговую обстановку, и предусмотрена специальная функция `save(r::Robot, <имя_файда>::AbstractString)`.

Здесь нужно понимать, что при выполнении конструктора `r=Robot(<имя_файла_с_исходной_обстановкой>)` происходит копирование данных из файла во внутренний буфер, содержащийся в объекте `r`, и при выполнении различных действий Робота каждый раз происходит с обновление содержимого этого буфера. При желании сохранить текущее содержание буфера в соответствующем файле следует использовать функцию `save`. При этом считается, что программисту не известен формат данных, хранящихся в файлах с обстановкой (для работы с этими данными как раз и предназначен Робот).

Очевидно, что если интерпретировать Робота просто как обработчика и формирователя файлов специального формата, то главная функция всегда может быть просто обёрткой вокруг функции, получающей на вход непосредственно объект типа `Robot` (как в первом случае).

## Утилиты для предварительной подготовки файлов с обстановкой на поле

Для предварительной подготовки файла с какой-либо исходной обстановкой имеется отдельная специльная функция `sitcreate`, а для визуального редактирования файла с уже имеющейся обстановкой — `sitedit`. Использование этих функций также не предполагает знания внутреннего формата данных, все делается с помощью мыши.
Для просмотра закодированной в sit-файле обстановки, без возможности её
редактирования, предназначена функция `show(::AbstractString)`.

Создать файл с исходной обстановкой можно также и непосредственно с помощью конструктора `Robot` (без использования `sitcreate`), если только использовать его в режиме анимации. При этом обстановку в открывшемся окне можно будет отредактировать с помощью мыши. Результат любого действия по редактированию будет мгновенно сохранен в файле `untitled.sit`.
